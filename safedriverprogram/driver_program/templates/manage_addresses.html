{% extends "base.html" %}
{% load static %}

{% block content %}
<h2>My Delivery Addresses</h2>

<!-- List existing addresses -->
<ul>
    {% for address in addresses %}
    <li>
        {{ address.address }}
        <a href="{% url 'edit_address' address.id %}">Edit</a> |
        <form method="post" action="{% url 'delete_address' address.id %}" style="display:inline;">
            {% csrf_token %}
            <button type="submit">Delete</button>
        </form>
    </li>
    {% empty %}
    <li>No addresses saved yet.</li>
    {% endfor %}
</ul>

<!-- Button to show the add address form -->
<button id="showAddFormBtn">Add New Address</button>

<!-- Hidden form initially -->
<div id="addFormContainer" style="display:none; margin-top:10px;">
    <form method="post" action="">
        {% csrf_token %}
        {{ add_form.as_p }}
        <button type="submit" name="add_address">Save</button>
    </form>
</div>

<script>
    const btn = document.getElementById('showAddFormBtn');
    const formDiv = document.getElementById('addFormContainer');

    btn.addEventListener('click', () => {
        formDiv.style.display = formDiv.style.display === 'none' ? 'block' : 'none';
    });
</script>

{% endblock %}

